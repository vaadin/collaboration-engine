<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Date Time Picker highlight</title>
    <script>
      window.polymerSkipLoadingFontRoboto = true;
    </script>
  </head>

  <body>
    <style>
      #test {
        height: 150px;
        padding: 20px;
      }
    </style>

    <div id="test">
      <vaadin-date-time-picker></vaadin-date-time-picker>
    </div>

    <script type="module">
      (async () => {
        const theme = window.location.search.replace(/.*theme=(\w+).*/, '$1') || 'lumo';

        const { FieldHighlighter } = await import('../../theme/' + theme + '/vaadin-field-highlighter.js');

        await import('@vaadin/vaadin-date-time-picker/theme/' + theme + '/vaadin-date-time-picker.js');

        const field = document.querySelector('vaadin-date-time-picker');
        FieldHighlighter.init(field);

        window.requestAnimationFrame(() => {
          const users = [
            { id: 'a', name: 'User', colorIndex: 0, fieldIndex: 0 },
            { id: 'b', name: 'Moderator', colorIndex: 1, fieldIndex: 1 },
            { id: 'c', name: 'Admin', colorIndex: 2, fieldIndex: 1 }
          ];

          // Mimic focus to show highlight and badges
          field.dispatchEvent(new CustomEvent('mouseenter'));

          FieldHighlighter.setUsers(field, users);

          setTimeout(() => {
            document.getElementById('test').dataset.ready = true;
          });
        });
      })();
    </script>
  </body>
</html>
