<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
  <title>Field Highlighting Example</title>
</head>

<body>
  <div class="container" style="margin: 20px;">
    <vaadin-text-field></vaadin-text-field>
    <br>
    <vaadin-checkbox-group label="Active user">
      <vaadin-checkbox name="user" value="All Beach">AB</vaadin-checkbox>
      <vaadin-checkbox name="user" value="Cold Duckling">CD</vaadin-checkbox>
      <vaadin-checkbox name="user" value="Effortless Flower">EF</vaadin-checkbox>
      <vaadin-checkbox name="user" value="Good Holiday">GH</vaadin-checkbox>
      <vaadin-checkbox name="user" value="Infinite Joke">IJ</vaadin-checkbox>
      <vaadin-checkbox name="user" value="Very long name that should be truncated">Long</vaadin-checkbox>
    </vaadin-checkbox-group>
  </div>

  <script type="module">
    import '@vaadin/vaadin-checkbox/vaadin-checkbox-group.js';
    import '@vaadin/vaadin-checkbox/vaadin-checkbox.js';
    import '@vaadin/vaadin-text-field/vaadin-text-field.js';
    import { FieldHighlighter } from './theme/lumo/vaadin-field-highlighter.js';

    const field = document.querySelector('vaadin-text-field');
    const fh = FieldHighlighter.init(field);

    const group = document.querySelector('vaadin-checkbox-group');

    // Switch active user
    group.addEventListener('change', e => {
      Array.from(group.children).forEach((checkbox, index) => {
        const user = { name: checkbox.value, colorIndex: index, id: index };
        if (group.value.indexOf(checkbox.value) > -1) {
          // Do not add the same user twice
          if (!fh.users.filter(u => u.id === index)[0]) {
            fh.addUser(user);
          }
        } else {
          fh.removeUser(user);
        }
      });
    });
  </script>
</body>
</html>
